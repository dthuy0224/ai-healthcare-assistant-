<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}AI Health Care Assistant{% endblock %}</title>

    <!-- Meta tags for SEO and social sharing -->
    <meta name="description" content="{% block description %}Trợ lý y tế thông minh sử dụng AI để hỗ trợ chẩn đoán sơ bộ và theo dõi sức khỏe{% endblock %}">
    <meta name="keywords" content="AI, y tế, sức khỏe, chẩn đoán, trợ lý y tế, Việt Nam">
    <meta name="author" content="AI Health Care Team">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Design System CSS -->
    <link rel="stylesheet" href="/static/css/design-system.css">
    <link rel="stylesheet" href="/static/css/navbar.css">
    <link rel="stylesheet" href="/static/css/features.css">

    <!-- Page-specific CSS -->
    {% block css %}{% endblock %}

    <!-- Accessibility -->
    <script>
        // Add class to html element for CSS feature detection
        document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
    </script>
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="sr-only">Skip to main content</a>

    <!-- Modern Healthcare Navigation -->
    <header class="healthcare-navbar" role="banner" id="main-navbar">
        <nav class="navbar-container" role="navigation" aria-label="Main navigation">
            <!-- Logo Section -->
            <div class="navbar-brand">
                <a href="/" class="brand-link" aria-label="AI Health Care Assistant">
                    <div class="brand-icon">
                        <!-- Medical Cross + AI Icon -->
                        <svg class="medical-cross" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C13.1 2 14 2.9 14 4V10H20C21.1 10 22 10.9 22 12C22 13.1 21.1 14 20 14H14V20C14 21.1 13.1 22 12 22C10.9 22 10 21.1 10 20V14H4C2.9 14 2 13.1 2 12C2 10.9 2.9 10 4 10H10V4C10 2.9 10.9 2 12 2Z"/>
                        </svg>
                        <svg class="ai-circuit" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6"/>
                            <path d="m21 12-6-6-6 6-6-6"/>
                        </svg>
                    </div>
                    <div class="brand-text">
                        <h1 class="brand-title">AI Health</h1>
                        <p class="brand-subtitle">Assistant</p>
                    </div>
                </a>
            </div>

            <!-- Desktop Navigation Menu -->
            <div class="navbar-menu">
                <div class="nav-links">
                    <a href="/" class="nav-link">
                        <span class="link-text">Trang chủ</span>
                        <div class="link-underline"></div>
                    </a>
                    <a href="/dashboard" class="nav-link">
                        <span class="link-text">Dashboard</span>
                        <div class="link-underline"></div>
                    </a>
                    <a href="/chat" class="nav-link">
                        <span class="link-text">AI Chat</span>
                        <div class="link-underline"></div>
                    </a>
                    <a href="/assessment" class="nav-link">
                        <span class="link-text">Đánh giá</span>
                        <div class="link-underline"></div>
                    </a>
                </div>
            </div>

            <!-- User Actions -->
            <div class="navbar-actions">
                {% if current_user %}
                    <!-- Authenticated User Dropdown -->
                    <div class="user-dropdown" id="user-dropdown">
                        <button class="user-trigger" aria-expanded="false" aria-haspopup="true">
                            <img src="{{ current_user.avatar or '/static/images/default-avatar.png' }}"
                                 alt="Avatar" class="user-avatar">
                            <span class="user-name">{{ current_user.name }}</span>
                            <svg class="dropdown-arrow" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                            </svg>
                        </button>
                        
                        <div class="dropdown-menu" role="menu">
                            <a href="/profile" class="dropdown-item" role="menuitem">
                                <svg class="item-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                </svg>
                                Hồ sơ cá nhân
                            </a>
                            <a href="/settings" class="dropdown-item" role="menuitem">
                                <svg class="item-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                                </svg>
                                Cài đặt
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="/logout" class="dropdown-item logout" role="menuitem">
                                <svg class="item-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
                                </svg>
                                Đăng xuất
                            </a>
                        </div>
                    </div>
                {% else %}
                    <!-- Guest User Actions -->
                    <div class="auth-actions">
                        <a href="/login" class="auth-link login-link">Đăng nhập</a>
                        <a href="/register" class="auth-link register-btn">Đăng ký</a>
                    </div>
                {% endif %}

                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-toggle" aria-label="Toggle menu" id="mobile-menu-button">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </nav>

        <!-- Mobile Navigation Overlay -->
        <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
        
        <!-- Mobile Navigation Menu -->
        <div class="mobile-menu" id="mobile-menu">
            <div class="mobile-menu-header">
                <div class="mobile-brand">
                    <div class="brand-icon">
                        <svg class="medical-cross" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C13.1 2 14 2.9 14 4V10H20C21.1 10 22 10.9 22 12C22 13.1 21.1 14 20 14H14V20C14 21.1 13.1 22 12 22C10.9 22 10 21.1 10 20V14H4C2.9 14 2 13.1 2 12C2 10.9 2.9 10 4 10H10V4C10 2.9 10.9 2 12 2Z"/>
                        </svg>
                    </div>
                    <div class="brand-text">
                        <h2>AI Health Assistant</h2>
                    </div>
                </div>
                <button class="mobile-menu-close" id="mobile-menu-close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <nav class="mobile-nav">
                <a href="/" class="mobile-nav-link">
                    <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                    </svg>
                    Trang chủ
                </a>
                <a href="/dashboard" class="mobile-nav-link">
                    <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                    </svg>
                    Dashboard
                </a>
                <a href="/chat" class="mobile-nav-link">
                    <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                    </svg>
                    AI Chat
                </a>
                <a href="/assessment" class="mobile-nav-link">
                    <svg class="nav-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 01-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 011.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 011.414-1.414L15 13.586V12a1 1 0 011-1z" clip-rule="evenodd"/>
                    </svg>
                    Đánh giá sức khỏe
                </a>

                {% if current_user %}
                    <div class="mobile-user-section">
                        <div class="mobile-user-info">
                            <img src="{{ current_user.avatar or '/static/images/default-avatar.png' }}"
                                 alt="Avatar" class="mobile-user-avatar">
                            <div class="mobile-user-details">
                                <span class="mobile-user-name">{{ current_user.name }}</span>
                                <span class="mobile-user-email">{{ current_user.email }}</span>
                            </div>
                        </div>
                        <div class="mobile-user-actions">
                            <a href="/profile" class="mobile-action-link">Hồ sơ</a>
                            <a href="/settings" class="mobile-action-link">Cài đặt</a>
                            <a href="/logout" class="mobile-action-link logout">Đăng xuất</a>
                        </div>
                    </div>
                {% else %}
                    <div class="mobile-auth-section">
                        <a href="/login" class="mobile-auth-btn login">Đăng nhập</a>
                        <a href="/register" class="mobile-auth-btn register">Đăng ký</a>
                    </div>
                {% endif %}
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" role="main" style="padding-top: 64px;">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-white py-12" role="contentinfo">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8">
                <!-- Brand Section -->
                <div class="lg:col-span-1">
                    <h3 class="text-2xl font-bold mb-4">AI HEALTH</h3>
                    <p class="text-gray-400 text-sm">© 2024</p>
                </div>

                <!-- Services -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Services</h4>
                    <ul class="space-y-2">
                        <li><a href="/assessment" class="text-blue-400 hover:text-white transition-colors">Health Assessment</a></li>
                        <li><a href="/chat" class="text-blue-400 hover:text-white transition-colors">AI Chat</a></li>
                        <li><a href="/dashboard" class="text-blue-400 hover:text-white transition-colors">Dashboard</a></li>
                    </ul>
                </div>

                <!-- Company -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Company</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-blue-400 hover:text-white transition-colors">About us</a></li>
                        <li><a href="#" class="text-blue-400 hover:text-white transition-colors">Careers</a></li>
                        <li><a href="#" class="text-blue-400 hover:text-white transition-colors">Contact us</a></li>
                    </ul>
                </div>

                <!-- Legal -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-blue-400 hover:text-white transition-colors">Terms & Conditions</a></li>
                        <li><a href="#" class="text-blue-400 hover:text-white transition-colors">Privacy Policy</a></li>
                    </ul>
                </div>

                <!-- Follow us -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Follow us</h4>
                    <div class="flex space-x-3">
                        <a href="#" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-500 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                            </svg>
                        </a>
                        <a href="#" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-500 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                            </svg>
                        </a>
                        <a href="#" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-500 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </a>
                        <a href="#" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-500 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75S24 8.83 24 12z"/>
                            </svg>
                        </a>
                        <a href="#" class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-500 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="/static/js/navbar.js"></script>
    <script src="/static/js/features.js"></script>
    <script src="/static/js/main.js"></script>
    {% block js %}{% endblock %}
</body>
</html>